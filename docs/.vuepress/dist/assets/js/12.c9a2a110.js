(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{375:function(a,s,t){"use strict";t.r(s);var e=t(42),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h3",{attrs:{id:"安装flink"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装flink"}},[a._v("#")]),a._v(" 安装flink")]),a._v(" "),t("ol",[t("li",[a._v("下载")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://archive.apache.org/dist/flink/flink-1.12.2/flink-1.12.2-bin-scala_2.11.tgz\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -xvf flink-1.12.2-bin-scala_2.11.tgz -C /data/\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("添加依赖")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /data/flink-1.12.2/lib/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" /data/alluxio-2.6.0/client/alluxio-2.6.0-client.jar ./\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://repo1.maven.org/maven2/com/alibaba/ververica/flink-connector-mysql-cdc/1.3.0/flink-connector-mysql-cdc-1.3.0.jar\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://repo.maven.apache.org/maven2/org/apache/hudi/hudi-flink-bundle_2.11/0.9.0/hudi-flink-bundle_2.11-0.9.0.jar\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[t("code",[a._v("/data/flink1.12.2/hadoopconf/core-site.xml")]),a._v(" 文件中添加")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("configuration"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("fs.alluxio.impl"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("alluxio.hadoop.FileSystem"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/configuration"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("ol",{attrs:{start:"4"}},[t("li",[t("code",[a._v("conf/flink-conf.yaml")]),a._v("文件中添加")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("fs.hdfs.hadoopconf: /data/flink-1.12.2/hadoopconf\ntaskmanager.numberOfTaskSlots: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v("\nexecution.checkpointing.interval: 10sec\nstate.backend: rocksdb\nstate.checkpoints.dir: alluxio://localhost:19998/flink-checkpoints\nstate.savepoints.dir: alluxio://localhost:19998/flink-savepoints\n")])])]),t("ol",{attrs:{start:"5"}},[t("li",[a._v("启动")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HADOOP_CLASSPATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("/data/hivespine/hadoop-3.3.1/bin/hadoop classpath"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n/data/flink-1.12.2/bin/start-cluster.sh\n")])])]),t("h3",{attrs:{id:"安装flink-sql-gateway"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装flink-sql-gateway"}},[a._v("#")]),a._v(" 安装flink-sql-gateway")]),a._v(" "),t("h4",{attrs:{id:"代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码"}},[a._v("#")]),a._v(" 代码")]),a._v(" "),t("p",[a._v("仓库：http://10.2.174.240/backend/flink-sql-gateway\n分支：flink-1.12")]),a._v(" "),t("h4",{attrs:{id:"编译"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译"}},[a._v("#")]),a._v(" 编译")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("mvn clean package -DskipTests\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" target/flink-sql-gateway-0.3-SNAPSHOT-bin/flink-sql-gateway-0.3-SNAPSHOT /data/flink-sql-gateway\n")])])]),t("h4",{attrs:{id:"配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[a._v("#")]),a._v(" 配置")]),a._v(" "),t("p",[a._v("修改"),t("code",[a._v("conf/sql-gateway-defaults.yaml")]),a._v("文件")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("server.bind-address: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0\nserver.address: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0\n")])])]),t("p",[a._v("环境")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("FLINK_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/data/flink-1.12.2/\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HADOOP_CLASSPATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("/data/hivespine/hadoop-3.3.1/bin/hadoop classpath"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n")])])]),t("h4",{attrs:{id:"启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[a._v("#")]),a._v(" 启动")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" ./bin/sql-gateway.sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n")])])]),t("h3",{attrs:{id:"验证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#验证"}},[a._v("#")]),a._v(" 验证")]),a._v(" "),t("p",[a._v("确保 8081端口(flink)和8083端口(flink-sql-gateway)正常监听")])])}),[],!1,null,null,null);s.default=r.exports}}]);